<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Roulette ‚Äî Single-Zero (European)</title>
<style>
  :root{
    --bg:#0b1220;
    --panel:#111a2c;
    --accent:#06b6d4;
    --text:#e5e7eb;
    --muted:#9aa4b2;
    --green:#16a34a;
    --red:#ef4444;
    --chip:#fbbf24;
    --card:#0f172a;
    --shadow:0 10px 25px rgba(0,0,0,.35);
    --ring:#0ea5e9;
  }
  *{box-sizing:border-box}
  body{
    margin:0; background:radial-gradient(1200px 700px at 20% -10%, #1f2937 0%, #0b1220 55%), var(--bg);
    color:var(--text); font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    min-height:100vh; display:flex; align-items:center; justify-content:center; padding:24px;
  }
  .app{
    width:min(1200px, 96vw); display:grid; gap:24px;
    grid-template-columns: 1.1fr .9fr;
  }
  @media (max-width: 980px){
    .app{grid-template-columns:1fr}
  }
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,0)) , var(--panel);
    border:1px solid rgba(255,255,255,.06);
    border-radius:20px; padding:18px; box-shadow:var(--shadow);
  }
  .title{
    display:flex; align-items:center; justify-content:space-between; margin-bottom:12px;
  }
  .title h2{margin:0; font-size:20px; letter-spacing:.3px}
  .title .hint{color:var(--muted); font-size:13px}
  .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
  .balance{
    display:flex; gap:16px; align-items:center; font-weight:600;
  }
  .badge{
    background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.08);
    padding:6px 10px; border-radius:999px; font-size:13px;
  }
  .btn{
    appearance:none; border:1px solid rgba(255,255,255,.1);
    background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.02));
    color:var(--text); padding:10px 14px; border-radius:12px; font-weight:600; cursor:pointer;
    transition:.2s transform, .2s opacity, .2s border-color, .2s background;
  }
  .btn:hover{transform:translateY(-1px); border-color:rgba(255,255,255,.22)}
  .btn:disabled{opacity:.45; cursor:not-allowed; transform:none}
  .btn.primary{background:linear-gradient(180deg, rgba(14,165,233,.25), rgba(14,165,233,.05)); border-color:rgba(14,165,233,.45)}
  .btn.warn{background:linear-gradient(180deg, rgba(239,68,68,.25), rgba(239,68,68,.05)); border-color:rgba(239,68,68,.45)}
  .btn.success{background:linear-gradient(180deg, rgba(16,185,129,.25), rgba(16,185,129,.05)); border-color:rgba(16,185,129,.45)}
  .chip{
    background:radial-gradient(circle at 30% 30%, #fff3, #0000), var(--chip);
    color:#1f2937; border:2px solid #0003; border-radius:999px; padding:8px 12px; font-weight:800; cursor:pointer;
    box-shadow: inset 0 2px 0 #fff6, 0 2px 4px rgba(0,0,0,.35);
  }
  .chip.sel{outline:2px solid var(--ring); outline-offset:2px}
  .grid{
    display:grid; grid-template-columns:repeat(3, 1fr); gap:6px;
  }
  .cell{
    position:relative; border:1px solid rgba(255,255,255,.08); border-radius:8px;
    background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.015));
    text-align:center; padding:10px 0; cursor:pointer; font-weight:700;
    transition:.15s transform, .15s border-color, .15s background;
    user-select:none;
  }
  .cell:hover{transform:translateY(-1px); border-color:rgba(255,255,255,.22)}
  .cell .dot{
    position:absolute; top:6px; right:6px; width:10px; height:10px; border-radius:50%;
  }
  .cell.red{background:linear-gradient(180deg, rgba(239,68,68,.23), rgba(239,68,68,.05))}
  .cell.black{background:linear-gradient(180deg, rgba(0,0,0,.35), rgba(255,255,255,.02))}
  .cell.zero{grid-column:1/4; background:linear-gradient(180deg, rgba(34,197,94,.25), rgba(34,197,94,.07))}
  .pillbar{display:grid; grid-template-columns:repeat(6,1fr); gap:8px}
  .pill{padding:8px 10px; border:1px solid rgba(255,255,255,.1); border-radius:999px; text-align:center; cursor:pointer; font-weight:700}
  .pill:hover{border-color:rgba(255,255,255,.22)}
  .list{
    display:flex; flex-direction:column; gap:8px; max-height:240px; overflow:auto; padding-right:6px;
  }
  .betitem{
    display:flex; justify-content:space-between; align-items:center; padding:10px; border-radius:10px;
    background:linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.01)); border:1px solid rgba(255,255,255,.06)
  }
  .betitem small{color:var(--muted)}
  .numbadge{
    display:inline-flex; align-items:center; justify-content:center; width:28px; height:28px; border-radius:50%;
    font-weight:800; border:2px solid rgba(255,255,255,.15); margin-right:8px;
  }
  .nb-red{background:#b91c1c}
  .nb-black{background:#111827}
  .nb-green{background:#065f46}
  .controls{display:flex; gap:10px; flex-wrap:wrap}
  .total{margin-left:auto; font-weight:800}
  .result{
    margin-top:10px; font-weight:700;
  }
  .history{display:flex; gap:6px; flex-wrap:wrap}
  .hitem{
    display:inline-flex; align-items:center; justify-content:center; width:30px; height:30px; border-radius:50%;
    font-weight:800; border:2px solid rgba(255,255,255,.15); font-size:13px
  }
  .note{color:var(--muted); font-size:12px}

  /* Wheel */
  .wheel-wrap{
    position:relative; aspect-ratio:1/1; width:min(520px, 80vw); margin-inline:auto;
    display:grid; place-items:center;
  }
  .wheel{
    position:relative; width:100%; height:100%; border-radius:50%;
    background:radial-gradient(circle at 50% 50%, #0f172a 0 44%, #1f2937 44% 47%, #0f172a 47% 100%);
    box-shadow:inset 0 0 40px rgba(0,0,0,.7), 0 12px 35px rgba(0,0,0,.5);
    transform:rotate(0deg);
  }
  .pointer{
    position:absolute; top:-6px; left:50%; transform:translateX(-50%);
    width:0; height:0; border-left:12px solid transparent; border-right:12px solid transparent; border-bottom:18px solid var(--ring);
    filter:drop-shadow(0 6px 8px rgba(0,0,0,.5));
    z-index:5;
  }
  .hub{
    position:absolute; width:100px; height:100px; border-radius:50%;
    background:radial-gradient(circle at 30% 30%, #fff3, #0000), #111827;
    border:6px solid #0ea5e9; box-shadow:inset 0 0 20px #0008, 0 0 25px #0ea5e955; z-index:2;
  }
  .tick{
    position:absolute; inset:0; display:flex; align-items:flex-start; justify-content:center; transform-origin:center; pointer-events:none;
  }
  .tick-inner{
    transform:translateY(7%); text-align:center;
    display:flex; flex-direction:column; align-items:center; gap:8px;
  }
  .tick .bar{
    width:4px; height:34px; border-radius:2px;
  }
  .tick .lbl{
    font-size:12px; font-weight:800; padding:2px 6px; border-radius:8px; border:1px solid rgba(255,255,255,.18);
    background:rgba(0,0,0,.35);
  }
  .tick.red .bar{background:#ef4444}
  .tick.black .bar{background:#111827}
  .tick.green .bar{background:#10b981}
  .sr{position:absolute; width:1px; height:1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap}
</style>
</head>
<body>
  <div class="app">
    <!-- Left: Wheel -->
    <section class="card">
      <div class="title">
        <h2>Roulette Wheel</h2>
        <div class="balance">
          <span class="badge">Balance: $<span id="balance">1000</span></span>
          <span class="badge">Total Bet: $<span id="totalBet">0</span></span>
        </div>
      </div>

      <div class="wheel-wrap">
        <div class="pointer" aria-hidden="true"></div>
        <div id="wheel" class="wheel" aria-live="polite" aria-label="Spinning roulette wheel"></div>
        <div class="hub"></div>
      </div>

      <div class="row" style="margin-top:14px">
        <button id="spinBtn" class="btn primary" disabled>üé° Spin</button>
        <button id="clearBtn" class="btn">üßπ Clear Bets</button>
        <button id="repeatBtn" class="btn">üîÅ Repeat Last</button>
        <div class="total">Potential Loss: $<span id="potentialLoss">0</span></div>
      </div>
      <div id="roundResult" class="result"></div>
      <div style="margin-top:10px">
        <div class="note">Flow: Select a chip ‚ûú add bets ‚ûú Spin. Bets are checked against your balance. 0 is green and loses all even-money/dozen/column bets.</div>
      </div>
    </section>

    <!-- Right: Betting -->
    <section class="card">
      <div class="title">
        <h2>Place Your Bets</h2>
        <div class="hint">Single-zero European table</div>
      </div>

      <div style="margin-bottom:10px">
        <div class="row">
          <span class="hint">Chip:</span>
          <button class="chip" data-chip="1">$1</button>
          <button class="chip" data-chip="5">$5</button>
          <button class="chip sel" data-chip="10">$10</button>
          <button class="chip" data-chip="25">$25</button>
          <button class="chip" data-chip="100">$100</button>
          <button class="chip" data-chip="500">$500</button>
          <span class="hint">Current: $<span id="chipValue">10</span></span>
        </div>
      </div>

      <div style="display:grid; grid-template-columns:1fr; gap:14px">
        <!-- Number grid -->
        <div>
          <div class="row" style="justify-content:space-between; margin-bottom:6px">
            <strong>Numbers</strong>
            <span class="note">Click a number to add a straight bet</span>
          </div>
          <div id="numGrid" class="grid"></div>
        </div>

        <!-- Outside bets -->
        <div>
          <div class="row" style="justify-content:space-between; margin-bottom:6px">
            <strong>Outside Bets</strong>
            <span class="note">Click to add with selected chip</span>
          </div>
          <div class="pillbar" style="margin-bottom:8px">
            <div class="pill" data-bet="color:red">Red</div>
            <div class="pill" data-bet="color:black">Black</div>
            <div class="pill" data-bet="evenodd:even">Even</div>
            <div class="pill" data-bet="evenodd:odd">Odd</div>
            <div class="pill" data-bet="lowhigh:low">1‚Äì18</div>
            <div class="pill" data-bet="lowhigh:high">19‚Äì36</div>
          </div>
          <div class="pillbar" style="margin-bottom:8px">
            <div class="pill" data-bet="dozen:1">1st 12</div>
            <div class="pill" data-bet="dozen:2">2nd 12</div>
            <div class="pill" data-bet="dozen:3">3rd 12</div>
            <div class="pill" data-bet="column:1">Column 1</div>
            <div class="pill" data-bet="column:2">Column 2</div>
            <div class="pill" data-bet="column:3">Column 3</div>
          </div>
        </div>

        <!-- Bet slip -->
        <div>
          <div class="row" style="justify-content:space-between; margin-bottom:6px">
            <strong>Bet Slip</strong>
            <span class="note">Remove any bet before you spin</span>
          </div>
          <div id="betList" class="list"></div>
        </div>

        <!-- History -->
        <div>
          <div class="row" style="justify-content:space-between; margin-bottom:6px">
            <strong>History</strong>
            <span class="note">Last 12 outcomes</span>
          </div>
          <div id="history" class="history"></div>
        </div>
      </div>
    </section>
  </div>

<script>
(() => {
  // European wheel sequence (clockwise from top): 0, 32, 15, 19, 4, 21, 2, 25, 17, 34, 6, 27, 13, 36, 11, 30, 8, 23, 10, 5, 24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3, 26
  const wheelSeq = [0,32,15,19,4,21,2,25,17,34,6,27,13,36,11,30,8,23,10,5,24,16,33,1,20,14,31,9,22,18,29,7,28,12,35,3,26];
  const reds = new Set([1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36]);
  const segAngle = 360 / wheelSeq.length;

  // State
  let balance = 1000;
  let chip = 10;
  let bets = [];      // { type, key, amount, label }
  let lastBets = [];
  let spinning = false;
  let currentRotation = 0;
  const history = [];

  // DOM refs
  const wheelEl = document.getElementById('wheel');
  const balanceEl = document.getElementById('balance');
  const totalBetEl = document.getElementById('totalBet');
  const potentialLossEl = document.getElementById('potentialLoss');
  const chipValEl = document.getElementById('chipValue');
  const betListEl = document.getElementById('betList');
  const spinBtn = document.getElementById('spinBtn');
  const clearBtn = document.getElementById('clearBtn');
  const repeatBtn = document.getElementById('repeatBtn');
  const resultEl = document.getElementById('roundResult');
  const historyEl = document.getElementById('history');
  const numGridEl = document.getElementById('numGrid');

  function fmtNum(n){ return Number(n).toLocaleString(); }

  // Build wheel ticks
  function buildWheel(){
    wheelEl.innerHTML = '';
    for(let i=0;i<wheelSeq.length;i++){
      const n = wheelSeq[i];
      const color = n === 0 ? 'green' : (reds.has(n) ? 'red' : 'black');
      const tick = document.createElement('div');
      tick.className = `tick ${color}`;
      tick.style.transform = `rotate(${i*segAngle}deg)`;
      tick.innerHTML = `
        <div class="tick-inner">
          <div class="bar"></div>
          <div class="lbl">${n}</div>
        </div>
      `;
      wheelEl.appendChild(tick);
    }
  }

  // Build number grid (0 on top row full width, then 3 columns 1..36)
  function buildNumberGrid(){
    // 0 row
    const zero = document.createElement('div');
    zero.className = 'cell zero';
    zero.textContent = '0';
    zero.addEventListener('click', () => addStraightBet(0));
    numGridEl.appendChild(zero);
    // 1..36 in roulette table order (12 rows x 3 columns): 3rd col on left (per European layout)
    // We'll render top row as 3,2,1; next 6,5,4; ... so the columns are [1st: 1,4,7,...,34], [2nd: 2,5,...,35], [3rd: 3,6,...,36]
    for (let row=0; row<12; row++){
      const a = 3 + row*3, b = 2 + row*3, c = 1 + row*3;
      [a,b,c].forEach(n => {
        const cell = document.createElement('div');
        const isRed = reds.has(n); const isBlack = !isRed;
        cell.className = `cell ${isRed?'red':'black'}`;
        cell.innerHTML = `${n}<span class="dot" style="background:${isRed ? '#ef4444':'#111827'}"></span>`;
        cell.addEventListener('click', () => addStraightBet(n));
        numGridEl.appendChild(cell);
      });
    }
  }

  // Betting helpers
  function addStraightBet(n){
    addBet({ type:'straight', key:String(n), amount:chip, label:`#${n}`, payout:35 });
  }
  function addOutsideBet(kind, key, label, payout){
    addBet({ type:kind, key, amount:chip, label, payout });
  }
  function addBet(b){
    const existing = bets.find(x => x.type===b.type && x.key===b.key);
    if (existing){ existing.amount += b.amount; }
    else { bets.push(b); }
    renderBets();
    updateTotals();
  }
  function removeBet(idx){
    bets.splice(idx,1);
    renderBets();
    updateTotals();
  }
  function clearBets(){
    bets = [];
    renderBets();
    updateTotals();
  }
  function repeatLast(){
    if (spinning) return;
    if (lastBets.length === 0) return;
    bets = JSON.parse(JSON.stringify(lastBets));
    renderBets();
    updateTotals();
  }

  function renderBets(){
    betListEl.innerHTML = '';
    if (bets.length === 0){
      const n = document.createElement('div');
      n.className = 'note';
      n.textContent = 'No bets yet. Click a number or an outside bet above to add one.';
      betListEl.appendChild(n);
      return;
    }
    bets.forEach((b, i) => {
      const it = document.createElement('div');
      it.className = 'betitem';
      const kindLabel = (() => {
        switch(b.type){
          case 'straight': return 'Straight';
          case 'color': return 'Color';
          case 'evenodd': return 'Even/Odd';
          case 'lowhigh': return 'Low/High';
          case 'dozen': return 'Dozen';
          case 'column': return 'Column';
        }
      })();
      const badge = (() => {
        if (b.type==='straight'){
          const n = Number(b.key);
          const c = n===0 ? 'green' : (reds.has(n) ? 'red':'black');
          return `<span class="numbadge nb-${c}">${n}</span>`;
        }
        if (b.type==='color'){
          return `<span class="numbadge nb-${b.key}"></span>`;
        }
        return `<span class="numbadge nb-black">√ó</span>`;
      })();
      it.innerHTML = `
        <div class="row">
          ${badge}
          <div>
            <div><strong>${kindLabel}</strong> ‚Äî ${b.label}</div>
            <small>Payout: ${b.payout}:1</small>
          </div>
        </div>
        <div class="row">
          <div class="badge">$${fmtNum(b.amount)}</div>
          <button class="btn warn" aria-label="Remove bet">‚úñ</button>
        </div>
      `;
      it.querySelector('button').addEventListener('click', () => removeBet(i));
      betListEl.appendChild(it);
    });
  }

  function updateTotals(){
    const total = bets.reduce((s,b)=>s+b.amount,0);
    totalBetEl.textContent = fmtNum(total);
    potentialLossEl.textContent = fmtNum(total);
    balanceEl.textContent = fmtNum(balance);
    // Enable spin only if we have bets and worst-case (lose all) ‚â§ balance
    spinBtn.disabled = spinning || bets.length===0 || total > balance;
    repeatBtn.disabled = spinning || lastBets.length===0;
    clearBtn.disabled = spinning || bets.length===0;
  }

  // Outcome helpers
  function colorOf(n){ return n===0 ? 'green' : (reds.has(n) ? 'red':'black'); }
  function wins(bet, n){
    switch(bet.type){
      case 'straight': return Number(bet.key) === n;
      case 'color': return (bet.key === colorOf(n));
      case 'evenodd': return n!==0 && (bet.key==='even' ? n%2===0 : n%2===1);
      case 'lowhigh': return bet.key==='low' ? (n>=1 && n<=18) : (n>=19 && n<=36);
      case 'dozen': {
        if (n===0) return false;
        const dz = n<=12 ? 1 : (n<=24?2:3);
        return String(dz) === bet.key;
      }
      case 'column': {
        if (n===0) return false;
        const col = (n % 3) === 1 ? 1 : ((n % 3) === 2 ? 2 : 3);
        return String(col) === bet.key;
      }
    }
    return false;
  }

  function computePayouts(n){
    let net = 0, grossWin = 0, totalStake = 0;
    const details = [];
    for (const b of bets){
      totalStake += b.amount;
      if (wins(b, n)){
        const gain = b.amount * b.payout; // net gain; stake is not deducted elsewhere
        net += gain;
        grossWin += (b.amount + gain);
        details.push({label:b.label, payout:b.payout, amount:b.amount, win:true, delta:gain});
      } else {
        net -= b.amount;
        details.push({label:b.label, payout:b.payout, amount:b.amount, win:false, delta:-b.amount});
      }
    }
    return { net, details, totalStake, grossWin };
  }

  function pushHistory(n){
    history.unshift(n);
    if (history.length>12) history.pop();
    renderHistory();
  }
  function renderHistory(){
    historyEl.innerHTML = '';
    for (const n of history){
      const c = colorOf(n);
      const div = document.createElement('div');
      div.className = 'hitem';
      div.style.background = c==='red' ? '#b91c1c' : c==='black' ? '#111827' : '#065f46';
      div.textContent = n;
      historyEl.appendChild(div);
    }
  }

  // Spin animation + resolution
  function spin(){
    if (spinning || bets.length===0) return;
    const worstLoss = bets.reduce((s,b)=>s+b.amount,0);
    if (worstLoss > balance){
      flashResult(`Not enough balance for these bets. Reduce total to ‚â§ $${fmtNum(balance)}.`, 'warn');
      return;
    }
    spinning = true; updateTotals(); resultEl.textContent = '';
    // Draw winning number uniformly
    const idx = Math.floor(Math.random()*wheelSeq.length);
    const winNumber = wheelSeq[idx];

    // Animate wheel to land with idx at the top (pointer)
    const targetRotation = currentRotation + (360*6) - (idx*segAngle);
    wheelEl.style.transition = 'transform 6s cubic-bezier(0.12, 0.6, 0, 1)';
    wheelEl.style.transform = `rotate(${targetRotation}deg)`;

    function onDone(){
      wheelEl.removeEventListener('transitionend', onDone);
      currentRotation = targetRotation % 360; // keep bounded
      resolveRound(winNumber);
      spinning = false;
      updateTotals();
    }
    wheelEl.addEventListener('transitionend', onDone);
  }

  function resolveRound(n){
    pushHistory(n);
    const color = colorOf(n);
    const { net, details } = computePayouts(n);
    balance += net;
    lastBets = JSON.parse(JSON.stringify(bets)); // store snapshot
    const outcome = net >= 0 ? `You won $${fmtNum(net)} üéâ` : `You lost $${fmtNum(-net)}`;
    const colorBadge = color==='red' ? '#ef4444' : color==='black' ? '#111827' : '#10b981';
    const detailHtml = details.map(d => {
      const sign = d.delta>=0 ? '+' : '‚Äì';
      const val = fmtNum(Math.abs(d.delta));
      return `<div class="note">${d.win?'‚úÖ':'‚ùå'} ${d.label} (${d.payout}:1) <strong>${sign}$${val}</strong></div>`;
    }).join('');
    resultEl.innerHTML = `
      <div class="row" style="align-items:center; gap:10px; flex-wrap:wrap">
        <div class="numbadge" style="background:${colorBadge}; width:36px; height:36px">${n}</div>
        <div><strong>${outcome}</strong></div>
      </div>
      <div style="margin-top:6px">${detailHtml}</div>
    `;
    // Clear current bets after resolution
    bets = [];
    renderBets();
    updateTotals();
  }

  function flashResult(msg, kind='warn'){
    resultEl.innerHTML = `<div class="badge" style="border-color:${kind==='warn'?'rgba(239,68,68,.45)':'rgba(14,165,233,.45)'}">${msg}</div>`;
  }

  // Wire up UI
  function wire(){
    // Chips
    document.querySelectorAll('.chip').forEach(el=>{
      el.addEventListener('click', ()=>{
        document.querySelectorAll('.chip').forEach(c=>c.classList.remove('sel'));
        el.classList.add('sel');
        chip = Number(el.dataset.chip);
        chipValEl.textContent = fmtNum(chip);
      });
    });

    // Outside bet pills
    document.querySelectorAll('.pill').forEach(p=>{
      p.addEventListener('click', ()=>{
        const [kind, key] = p.dataset.bet.split(':');
        switch(kind){
          case 'color': addOutsideBet('color', key, key.toUpperCase(), 1); break;
          case 'evenodd': addOutsideBet('evenodd', key, key==='even'?'EVEN':'ODD', 1); break;
          case 'lowhigh': addOutsideBet('lowhigh', key, key==='low'?'1‚Äì18':'19‚Äì36', 1); break;
          case 'dozen': {
            const label = key==='1'?'1‚Äì12': key==='2'?'13‚Äì24':'25‚Äì36';
            addOutsideBet('dozen', key, label, 2);
            break;
          }
          case 'column': {
            const label = key==='1'?'Col 1 (1,4,7,...)': key==='2'?'Col 2 (2,5,8,...)':'Col 3 (3,6,9,...)';
            addOutsideBet('column', key, label, 2);
            break;
          }
        }
      });
    });

    spinBtn.addEventListener('click', spin);
    clearBtn.addEventListener('click', clearBets);
    repeatBtn.addEventListener('click', repeatLast);
  }

  // Init
  buildWheel();
  buildNumberGrid();
  renderBets();
  updateTotals();
  wire();
})();
</script>
</body>
</html>
